<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="website_teachers" name="Teachers">
        <t t-call="website.layout">
            <div class="container py-5">
                <div class="ypu-hero mb-4">
                    <div class="row align-items-center">
                        <div class="col-lg-8">
                            <h1 class="h2 mb-2">Meet Our Teachers</h1>
                            <p class="mb-0">Explore profiles by subject, category, and availabilityâ€”no login required.</p>
                        </div>
                        <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
                            <span class="ypu-badge">Profiles kept up-to-date</span>
                        </div>
                    </div>
                </div>

                <form class="row g-3 mb-4 ypu-filters" method="get" action="/teachers">
                    <div class="col-md-5">
                        <label class="form-label text-muted small mb-1">Search</label>
                        <input type="search" name="search" t-att-value="search" class="form-control"
                               placeholder="Search by name or subject"/>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label text-muted small mb-1">Category</label>
                        <select name="category_id" class="form-select">
                            <option value="">All categories</option>
                            <t t-foreach="categories" t-as="category">
                                <option t-att-value="category['id']"
                                        t-att-selected="True if selected_category == category['id'] else None">
                                    <t t-esc="category['name']"/> (<t t-esc="category['teacher_count'] or 0"/>)
                                </option>
                            </t>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label text-muted small mb-1">Availability</label>
                        <select name="available" class="form-select">
                            <option value="">Any</option>
                            <option value="1" t-att-selected="True if selected_available is True else None">Available</option>
                            <option value="0" t-att-selected="True if selected_available is False else None">Not available</option>
                        </select>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button class="btn btn-primary w-100" type="submit">Filter</button>
                    </div>
                </form>

                <t t-if="not teachers">
                    <div class="alert alert-info">
                        No teachers available with the current filters.
                    </div>
                </t>
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    <t t-foreach="teachers" t-as="teacher">
                        <div class="col">
                            <div class="ypu-card h-100 p-3">
                                <div class="d-flex">
                                    <div class="ypu-avatar me-3">
                                        <t t-if="teacher.get('image_1920')">
                                            <img t-att-src="'/web/image/ypu.teacher/%s/image_1920' % teacher['id']" alt="Teacher photo"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="(teacher['name'] or ' ')[0].upper()"/>
                                        </t>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <div>
                                                <h5 class="mb-1"><t t-esc="teacher['name']"/></h5>
                                                <div class="text-muted small">
                                                    <t t-esc="teacher.get('subject') or ''"/>
                                                </div>
                                                <div class="text-muted small">
                                                    <t t-if="teacher['department']"><t t-esc="teacher['department']"/></t>
                                                </div>
                                            </div>
                                            <span class="ypu-badge" t-att-class="'ypu-badge ' + ('available' if teacher['available'] else 'unavailable')">
                                                <t t-esc="'Available' if teacher['available'] else 'Unavailable'"/>
                                            </span>
                                        </div>
                                        <div class="mt-2">
                                            <t t-if="teacher['category_id']">
                                                <span class="ypu-tag">
                                                    <t t-esc="teacher['category_id'][1]"/>
                                                </span>
                                            </t>
                                            <t t-if="teacher.get('subject')">
                                                <span class="ypu-tag">
                                                    <t t-esc="teacher['subject']"/>
                                                </span>
                                            </t>
                                        </div>
                                    </div>
                                </div>
                                <dl class="row mb-0 ypu-meta small mt-3">

                                    <dt class="col-6">Email</dt>
                                    <dd class="col-6 text-end">
                                        <t t-esc="teacher.get('email') or '-'"/>
                                    </dd>
                                    <dt class="col-6">Phone</dt>
                                    <dd class="col-6 text-end">
                                        <t t-esc="teacher.get('phone') or '-'"/>
                                    </dd>
                                    <dt class="col-6">Social Media</dt>
                                    <dd class="col-6 text-end">
                                        <t t-esc="teacher.get('years_of_experience') or 0"/> yrs
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </t>
    </template>
</odoo>
